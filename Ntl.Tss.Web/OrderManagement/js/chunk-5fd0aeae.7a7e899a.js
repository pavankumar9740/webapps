(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fd0aeae"],{"0beb":function(e,t,a){e.exports=a.p+"img/order-two.ad8a471a.png"},"13d5":function(e,t,a){"use strict";var s=a("23e7"),i=a("d58f").left,o=a("a640"),l=a("ae40"),n=o("reduce"),c=l("reduce",{1:0});s({target:"Array",proto:!0,forced:!n||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"63b3":function(e,t,a){e.exports=a.p+"img/order-three.54a34eef.png"},a434:function(e,t,a){"use strict";var s=a("23e7"),i=a("23cb"),o=a("a691"),l=a("50c4"),n=a("7b0b"),c=a("65f0"),r=a("8418"),d=a("1dde"),u=a("ae40"),p=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,g=9007199254740991,C="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var a,s,d,u,p,m,v=n(this),b=l(v.length),k=i(e,b),_=arguments.length;if(0===_?a=s=0:1===_?(a=0,s=b-k):(a=_-2,s=f(h(o(t),0),b-k)),b+a-s>g)throw TypeError(C);for(d=c(v,s),u=0;u<s;u++)p=k+u,p in v&&r(d,u,v[p]);if(d.length=s,a<s){for(u=k;u<b-s;u++)p=u+s,m=u+a,p in v?v[m]=v[p]:delete v[m];for(u=b;u>b-s+a;u--)delete v[u-1]}else if(a>s)for(u=b-s;u>k;u--)p=u+s-1,m=u+a-1,p in v?v[m]=v[p]:delete v[m];for(u=0;u<a;u++)v[u+k]=arguments[u+2];return v.length=b-s+a,d}})},d58f:function(e,t,a){var s=a("1c0b"),i=a("7b0b"),o=a("44ad"),l=a("50c4"),n=function(e){return function(t,a,n,c){s(a);var r=i(t),d=o(r),u=l(r.length),p=e?u-1:0,m=e?-1:1;if(n<2)while(1){if(p in d){c=d[p],p+=m;break}if(p+=m,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=m)p in d&&(c=a(c,d[p],p,r));return c}};e.exports={left:n(!1),right:n(!0)}},f0c5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[a("Header")],1),a("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[a("Sidebar")],1),a("div",{staticClass:"app-main__outer"},[a("div",{staticClass:"app-main__inner"},[a("StockRequestFulfill",{attrs:{"request-id":e.requestId}})],1)]),a("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[a("Footer")],1)],1)},i=[],o=a("0418"),l=a("5ea5"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",{staticClass:"container-fluid productManagement"},[a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"row p-5"},[a("div",{staticClass:"col-12 col-md-4 p-3 row"},[e._m(1),a("div",{staticClass:"col-md-9 mt-2"},[a("h5",{staticClass:"text-muted"},[e._v("Order Status")]),a("h5",{staticClass:"d-flex align-items-left text-primary"},[e._v(e._s(e.orderStatus))])])]),a("div",{staticClass:"col-12 col-md-4 border-left p-3 row"},[e._m(2),a("div",{staticClass:"col-md-9 mt-2"},[a("h5",{staticClass:"text-muted"},[e._v("Warehouse Name")]),a("h5",{staticClass:"d-flex align-items-left text-primary"},[e._v(e._s(e.warehouseName))])])]),e._m(3)])]),a("div",{staticClass:"container-fluid productManagement"},[[a("div",{staticClass:"mb-4"},[a("b-table",{staticClass:"itemListingFulfill",attrs:{items:e.items,fields:e.fields,responsive:"sm"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"primary"},on:{click:function(a){return e.toggleDetails(t.index)}}},[e._v(" Fulfill ")])]}},{key:"row-details",fn:function(t){return[a("div",{staticClass:"row pb-3"},[a("div",{staticClass:"row col-md-4"},[a("label",{staticClass:"col-md-3 pt-2"},[e._v("Package")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPackage,expression:"selectedPackage"}],staticClass:"form-control col-md-9",attrs:{name:"Package"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPackage=t.target.multiple?a:a[0]},function(a){return e.onProductChange(t.item.id)}]}},[a("option",{attrs:{disabled:"",selected:"",value:"0"}},[e._v("-select-")]),e._l(e.packageList,(function(t){return a("option",{key:t.productId,domProps:{value:{id:t.productId,text:t.productName}}},[e._v(" "+e._s(t.productName)+" ")])}))],2)]),a("div",{staticClass:"row col-md-4"},[a("label",{staticClass:"col-md-3 pt-2",attrs:{for:"codeValue"}},[e._v("Code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.codeValue,expression:"codeValue"}],staticClass:"form-control col-md-9",attrs:{id:"codeValue",disabled:!e.selectedPackage||e.showCartonSelection},domProps:{value:e.codeValue},on:{input:function(t){t.target.composing||(e.codeValue=t.target.value)}}})]),a("div",{staticClass:"row col-md-4 ml-2"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.codeValue||e.showCartonSelection},on:{click:function(a){return e.fetchCoils(t.item.id,t.index)}}},[e._v("Add")])])]),e.showCartonSelection?a("b-card",[a("h6",[e._v("Please select the real codes from the Carton")]),a("div",[a("b-form-group",{staticClass:"mb-0",scopedSlots:e._u([{key:"label",fn:function(){return[a("b-form-checkbox",{attrs:{indeterminate:e.indeterminate,"aria-describedby":"codes","aria-controls":"codes"},on:{change:e.toggleAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v(" "+e._s(e.selectAll?"Deselect All":"Select All")+" ")])]},proxy:!0}],null,!0)},[a("b-form-checkbox-group",{staticClass:"mb-3",attrs:{id:"codes",options:e.codes,name:"codes"},model:{value:e.selectedCodes,callback:function(t){e.selectedCodes=t},expression:"selectedCodes"}})],1)],1),a("div",{staticClass:"d-flex flex-row-reverse"},[a("b-button",{staticClass:"pull-right ml-3",attrs:{size:"sm",variant:"primary",disabled:e.selectedCodes.length<=0},on:{click:function(a){return e.cartonSelection(t.item.id,t.index)}}},[e._v("ADD")]),a("b-button",{staticClass:"pull-right",attrs:{size:"sm",variant:"primary"},on:{click:e.clearCartonSelection}},[e._v("CANCEL")])],1)]):e._e(),t.item.coilListing.length>0?a("b-card",[a("table",{staticClass:"table itemListingFulfill coilListing",attrs:{id:"tab"}},[a("thead",[a("tr",[a("th",[e._v("Package")]),a("th",[e._v("Code")]),a("th",[e._v("No. of Stamps")]),a("th",[e._v("Actions")])])]),a("tbody",[e._l(t.item.coilListing,(function(s,i){return a("tr",{key:i},[a("td",[e._v(e._s(e.packageObj[s.packageType]))]),a("td",[e._v(e._s(s.code))]),a("td",[e._v(e._s(s.stampCount))]),a("td",{staticClass:"remove-x-btn text-center"},[a("span",{on:{click:function(a){return e.removeItem(t.index,i)}}},[a("b",[e._v("X")])])])])})),a("tr",[a("td"),a("td",[a("b",[e._v("Total")])]),a("td",[e._v(e._s(t.item.totalAddedCoils))])]),a("tr",[a("td"),a("td",[a("b",[e._v("Coils required")])]),a("td",[e._v(e._s(t.item.totalCoils))])]),a("tr",[a("td"),a("td",[a("b",[e._v("Balance Coils required")])]),a("td",[e._v(e._s(t.item.balanceCoils))])])],2)]),a("div",{staticClass:"d-flex flex-row-reverse"},[a("b-button",{staticClass:"pull-right",attrs:{size:"sm",variant:"primary"},on:{click:function(a){return e.toggleDetails(t.index)}}},[e._v("CANCEL")])],1)]):e._e()]}}])})],1)],a("div",{staticClass:"card mb-2 pb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("p",{staticClass:"mt-4 col-md-12"},[e._v("Tracking ID")]),a("div",{staticClass:"col-md-12 pr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.trackingID,expression:"trackingID"}],staticClass:"form-control",domProps:{value:e.trackingID},on:{input:function(t){t.target.composing||(e.trackingID=t.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("p",{staticClass:"mt-4 col-md-12"},[e._v("Shipper")]),a("div",{staticClass:"col-md-12 pr-0"},[a("p",[e._v(e._s(e.warehouseName))])])]),a("div",{staticClass:"col-md-4"},[e._m(4),a("div",{staticClass:"form-group row mt-3 col-md-12 pr-0"},[a("div",{staticClass:"col-md-12 pr-0"},[a("b-input-group",[a("b-form-input",{attrs:{id:"expectedDate",type:"text",autocomplete:"off"},model:{value:e.expectedDate,callback:function(t){e.expectedDate=t},expression:"expectedDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","button-variant":"primary"},model:{value:e.expectedDate,callback:function(t){e.expectedDate=t},expression:"expectedDate"}})],1)],1)],1)])])]),a("div",{staticClass:"col-md-12"},[a("p",{staticClass:"mt-2"},[e._v("Notes")]),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.notes,expression:"notes"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:e.notes},on:{input:function(t){t.target.composing||(e.notes=t.target.value)}}})])])]),a("div",{staticClass:"mb-2"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-sm",modifiers:{"modal-sm":!0}}],staticClass:"float-right mt-2 mb-3 p-2 pl-5 pr-5",attrs:{variant:"primary",disabled:!(e.trackingID&&e.expectedDate&&e.notes&&e.fulfillmentBool)},on:{click:e.postFulfillOrder}},[e._v(" SUBMIT ")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-sm",modifiers:{"modal-sm":!0}}],staticClass:"float-right mt-2 mb-3 mr-2 p-2 pl-5 pr-5",attrs:{variant:"outline-primary"},on:{click:e.redirectToHome}},[e._v(" CANCEL ")])],1)],2)])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-block header-section"},[a("div",{staticClass:"py-3 align-self-center d-sm-flex w-100 rounded"},[a("div",{staticClass:"w-sm-100 mr-auto"},[a("h1",[a("b",[e._v("Fulfill Stock Request")])])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-3"},[s("img",{attrs:{src:a("0beb")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-3"},[s("img",{attrs:{src:a("63b3")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 col-md-4 border-left p-3 row"},[a("h5",{staticClass:"d-flex align-items-left text-primary"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"mt-4 col-md-12"},[a("label",{staticClass:"mb-0 text-dark",attrs:{for:"expectedDate"}},[e._v("Expected Date")])])}],r=(a("7db0"),a("caad"),a("c975"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("2532"),a("2909")),d=a("bc3a"),u=a.n(d),p=a("fc12"),m={data:function(){return{orderStatus:"",warehouseName:"",trackingID:"",editFlow:!1,fulfillmentBool:!1,showCartonSelection:!1,selectedPackage:{},packageList:[],packageObj:{},selectedFacilityLocation:"",expectedDate:null,notes:"",codeValue:"",selectAll:!1,indeterminate:!1,selectedCodes:[],codes:[],selectedRowIndex:0,selectedCarton:{},facilityLocationList:[],fields:["product","total_stamps","actions"],items:[]}},props:["requestId"],mounted:function(){var e=this;this.getWarehouses(),this.getPackageTypes(),this.requestId?(this.editFlow=!0,u.a.get("/InternalStock",{baseURL:"https://dev-authss-order-api.azurewebsites.net/api",params:{requestId:this.requestId}}).then((function(t){e.items=[{_showDetails:!1,isActive:!0,id:t.data.id,productTypeID:t.data.productId,product:t.data.productName,total_stamps:t.data.noOfStamps,totalAddedCoils:0,totalCoils:t.data.noOfStamps,balanceCoils:t.data.noOfStamps,coilListing:[],CartonCoilObject:{}}],e.selectedFacilityLocation={id:t.data.requestingFacilityId,text:t.data.requestingFacilityName},e.warehouseName=t.data.requestingFacilityName,e.orderStatus=t.data.status,e.notes=t.data.notes})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)}))):this.editFlow=!1},computed:{},methods:{updateFulfillmentBool:function(){var e=!0;this.items.length>0&&(this.fulfillmentBool=e)},postFulfillOrder:function(){var e=this,t={requestId:this.requestId,packages:this.items[0].coilListing,trackingId:this.trackingID,shipperId:parseInt(this.selectedFacilityLocation.id),expectedDate:this.expectedDate,comments:this.notes};u.a.post("/InternalStock/SaveInternalStockTransfer",t,{baseURL:"https://dev-authss-order-api.azurewebsites.net/api"}).then((function(){e.$router.push({name:"StockRequestList"})})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)}))},fetchCoils:function(e,t){var a=this,s=Object(r["a"])(this.items[t].coilListing),i=s.find((function(e){return e.code==a.codeValue}));if(void 0===i){var o=[];"Carton"==this.selectedPackage.text?(u.a.get("/InternalStock/GetStockTransferCarton",{baseURL:"https://dev-authss-order-api.azurewebsites.net/api",params:{cartonCode:this.codeValue,requestId:this.requestId}}).then((function(e){e.data.id in a.items[t].CartonCoilObject?(p["a"].warning("Some Coils in this Carton is already added in the table"),a.selectedPackage="",a.clearCartonSelection()):(a.showCartonSelection=!0,e.data.reels.length>0&&(a.selectedCarton=e.data,e.data.reels.map((function(e){a.codes.push(e.code)}))))})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)})),this.selectAll=!1):(this.showCartonSelection=!1,u.a.get("/InternalStock/GetStockTransferReel",{baseURL:"https://dev-authss-order-api.azurewebsites.net/api",params:{reelCode:this.codeValue,requestId:this.requestId}}).then((function(s){if(s.data.cartonId in a.items[t].CartonCoilObject)p["a"].warning("Carton which contains this coil is already added in the table"),a.selectedPackage="",a.clearCartonSelection();else{var i={cartonId:s.data.cartonId,code:s.data.code,id:s.data.id,isUsed:s.data.isUsed,packageType:s.data.packageType,reelSize:s.data.reelSize,stampCount:s.data.stampCount};o.push(i),a.addCoil(o,e,t)}})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)})))}else{var l=this.selectedPackage.text+" "+this.codeValue+" is already added in the table";p["a"].warning(l),this.selectedPackage="",this.clearCartonSelection()}},addCoil:function(e,t,a){var s=Object(r["a"])(this.items[a].coilListing);if(e[0].cartonId in this.items[a].CartonCoilObject||(this.items[a].CartonCoilObject[e[0].cartonId]=[]),"Reel"==this.selectedPackage.text){var i={packageId:e[0].id,code:this.codeValue,stampCount:e[0].stampCount,packageType:parseInt(this.selectedPackage.id)};s.push(i),this.updateTotalCoils(s,a)}else if(this.selectAll){var o=e.reduce((function(e,t){return e+parseInt(t.stampCount)}),0),l={packageId:e[0].cartonId,code:this.codeValue,stampCount:o,packageType:parseInt(this.selectedPackage.id)};s.push(l),this.updateTotalCoils(s,a)}else e.map((function(e){var t={packageId:e.id,code:e.code,stampCount:e.stampCount,packageType:parseInt(e.packageType)};s.push(t)})),this.updateTotalCoils(s,a);this.selectedPackage="",this.clearCartonSelection()},calculateTotalCoils:function(e,t,a){var s=e.reduce((function(e,t){return e+parseInt(t.stampCount)}),0),i=this.items[a].balanceCoils-s;return i>=0},updateTotalCoils:function(e,t){var a=e.reduce((function(e,t){return e+parseInt(t.stampCount)}),0);this.items[t].coilListing=Object(r["a"])(e),this.items[t].totalAddedCoils=a,this.items[t].balanceCoils=this.items[t].totalCoils-a,this.updateFulfillmentBool()},onProductChange:function(){this.clearCartonSelection()},toggleAll:function(e){this.selectedCodes=e?this.codes.slice():[]},toggleDetails:function(e){this.selectedRowIndex==e?this.items[e]._showDetails=!this.items[e]._showDetails:(this.selectedRowIndex=e,this.items.map((function(e){e._showDetails=!1})),this.items[e]._showDetails=!0),this.selectedPackage="",this.clearCartonSelection()},cartonSelection:function(e,t){var a=this,s=[];this.selectAll?(this.selectedCarton.reels.map((function(e){var t={cartonId:e.cartonId,code:e.code,id:e.id,isUsed:e.isUsed,packageType:e.packageType,reelSize:e.reelSize,stampCount:e.stampCount};s.push(t)})),this.addCoil(s,e,t)):(this.selectedCodes.map((function(e){a.codeValue=e,a.selectedCarton.reels.map((function(e){if(a.codeValue==e.code){var t={cartonId:e.cartonId,code:e.code,id:e.id,isUsed:e.isUsed,packageType:e.packageType,reelSize:e.reelSize,stampCount:e.stampCount};s.push(t)}}))})),this.addCoil(s,e,t)),this.selectedPackage="",this.clearCartonSelection()},clearCartonSelection:function(){this.codeValue="",this.selectAll=!1,this.indeterminate=!1,this.selectedCodes=[],this.codes=[],this.showCartonSelection=!1},removeItem:function(e,t){console.log("this.items[tableIndex].coilListing before",this.items[e].coilListing);var a=this.items[e].coilListing[t].code;if("Reel"==this.packageObj[this.items[e].coilListing[t].packageType])for(var s in this.items[e].CartonCoilObject)this.items[e].CartonCoilObject[s].includes(a)&&(this.items[e].CartonCoilObject[s].splice(this.items[e].CartonCoilObject[s].indexOf(a),1),0==this.items[e].CartonCoilObject[s].length&&delete this.items[e].CartonCoilObject[s]);else"Carton"==this.packageObj[this.items[e].coilListing[t].packageType]&&delete this.items[e].CartonCoilObject[this.items[e].coilListing[t].packageId];this.items[e].coilListing.splice(t,1),console.log("this.items[tableIndex].coilListing after",this.items[e].coilListing),this.updateTotalCoils(this.items[e].coilListing,e)},redirectToHome:function(){this.$router.push({name:"StockRequestList"})},getWarehouses:function(){var e=this;u.a.get("/Meta/GetWarehouses",{baseURL:"https://dev-authss-order-api.azurewebsites.net/api"}).then((function(t){var a=[];for(var s in t.data)a.push({productId:s,productName:t.data[s]});e.facilityLocationList=a})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)}))},getPackageTypes:function(){var e=this;u.a.get("/Packages/GetPackageTypes",{baseURL:"https://dev-authss-order-api.azurewebsites.net/api"}).then((function(t){var a=[];for(var s in t.data)"Pallet"!==t.data[s]&&a.push({productId:s,productName:t.data[s]});e.packageList=a,e.packageObj=t.data})).catch((function(e){e.response?p["a"].warning(e.response.data):e.request?console.log("err 2",e.request):console.log("err 3",e)}))}},watch:{selectedCodes:function(e){0===e.length?(this.indeterminate=!1,this.selectAll=!1):e.length===this.codes.length?(this.indeterminate=!1,this.selectAll=!0):(this.indeterminate=!0,this.selectAll=!1)}}},h=m,f=a("2877"),g=Object(f["a"])(h,n,c,!1,null,null,null),C=g.exports,v=a("fd2d"),b={name:"app",components:{Header:o["a"],Sidebar:l["a"],StockRequestFulfill:C,Footer:v["a"]},props:["requestId"],methods:{}},k=b,_=Object(f["a"])(k,s,i,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-5fd0aeae.7a7e899a.js.map